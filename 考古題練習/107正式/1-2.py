for t in range(int(input())):
    m=[]
    for i in range(3):
        s=input()
        m.append([s[0],s[1],s[2]])
    if (m[0][0]=='1' and m[0][1]=='1' and m[0][2]=='1' or
        m[1][0]=='1' and m[1][1]=='1' and m[1][2]=='1' or
        m[2][0]=='1' and m[2][1]=='1' and m[2][2]=='1' or
        m[0][0]=='1' and m[1][0]=='1' and m[2][0]=='1' or
        m[0][1]=='1' and m[1][1]=='1' and m[2][1]=='1' or
        m[0][2]=='1' and m[1][2]=='1' and m[2][2]=='1' or
        m[0][0]=='1' and m[1][1]=='1' and m[2][2]=='1' or
        m[0][2]=='1' and m[1][1]=='1' and m[2][0]=='1' ):
            print(1)
    elif (m[0][0]=='2' and m[0][1]=='2' and m[0][2]=='2' or
          m[1][0]=='2' and m[1][1]=='2' and m[1][2]=='2' or
          m[2][0]=='2' and m[2][1]=='2' and m[2][2]=='2' or
          m[0][0]=='2' and m[1][0]=='2' and m[2][0]=='2' or
          m[0][1]=='2' and m[1][1]=='2' and m[2][1]=='2' or
          m[0][2]=='2' and m[1][2]=='2' and m[2][2]=='2' or
          m[0][0]=='2' and m[1][1]=='2' and m[2][2]=='2' or
          m[0][2]=='2' and m[1][1]=='2' and m[2][0]=='2' ):
        print(2)
    else:
        print(3)